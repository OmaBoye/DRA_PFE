{% extends "base.html" %}

{% block content %}
<div class="card">
  <div class="card-header">
    <h5>Sélectionner une Analyse pour Créer un Résultat</h5>
  </div>
  <div class="card-body">
    <table class="table table-hover">
      <thead>
        <tr>
          <th>ID</th>
          <th>Patient</th>
          <th>Type d'Analyse</th>
          <th>Date</th>
          <th class="text-end">Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for analysis in analyses %}
        <tr>
          <td>#{{ analysis.id }}</td>
          <td>{{ analysis.sample.patient.full_name }}</td>
          <td>{{ analysis.analysis_type.name }}</td>
          <td>{{ analysis.created_at|date:"d/m/Y" }}</td>
          <td class="text-end">
            <a href="{% url 'results:create' analysis_id=analysis.id %}" 
               class="btn btn-sm btn-primary">
              <i class="fas fa-file-medical"></i> Créer
            </a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="5" class="text-center">Aucune analyse disponible pour créer des résultats</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}